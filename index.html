<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>오늘 뭐 입지?</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>👔</text></svg>">
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#f5f7fa">
  <!-- iOS 홈 화면 추가 -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="오늘뭐입지">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
</head>
<body>

  <!-- API 키 설정 화면 -->
  <div id="screen-setup" class="screen">
    <div class="setup-container">
      <div class="setup-icon">🔑</div>
      <h2 class="setup-title">기상청 API 설정</h2>
      <p class="setup-desc">공공데이터포털에서 발급받은<br><strong>일반 인증키(Encoding)</strong>를 입력하세요.</p>
      <form id="api-key-form" class="setup-form">
        <input type="text" id="api-key-input" class="setup-input" placeholder="API 인증키 붙여넣기" required>
        <button type="submit" class="btn">설정 완료</button>
      </form>
      <a class="setup-link" href="https://www.data.go.kr/data/15084084/openapi.do" target="_blank" rel="noopener">
        공공데이터포털에서 API 키 발급받기 →
      </a>
    </div>
  </div>

  <!-- 로딩 화면 -->
  <div id="screen-loading" class="screen">
    <div class="loading-container">
      <div class="spinner"></div>
      <p class="loading-text">기상청에서 날씨를 가져오고 있어요...</p>
    </div>
  </div>

  <!-- 에러 화면 -->
  <div id="screen-error" class="screen">
    <div class="error-container">
      <div class="error-icon">😥</div>
      <p id="error-message" class="error-message"></p>
      <button id="retry-btn" class="btn">다시 시도</button>
    </div>
  </div>

  <!-- 메인 화면 -->
  <div id="screen-main" class="screen">
    <header class="header">
      <div class="header-left">
        <span class="location-icon">📍</span>
        <span id="location-name">위치 확인 중</span>
      </div>
      <div class="header-right">
        <span id="update-time" class="update-time"></span>
        <button id="settings-btn" class="btn-icon" aria-label="설정">⚙️</button>
        <button id="refresh-btn" class="btn-icon" aria-label="새로고침">🔄</button>
      </div>
    </header>

    <!-- 현재 날씨 -->
    <section class="current-weather card">
      <div class="current-main">
        <span id="current-emoji" class="current-emoji"></span>
        <div class="current-temps">
          <span id="current-temp" class="current-temp"></span>
          <span id="current-apparent" class="current-apparent"></span>
        </div>
      </div>
      <div class="current-sub">
        <span id="current-label" class="current-label"></span>
        <span id="current-detail" class="current-detail"></span>
      </div>
    </section>

    <!-- 옷차림 추천 -->
    <section id="recommendation-card" class="recommendation card">
      <h2 class="section-title">오늘의 옷차림</h2>
      <div class="rec-header">
        <span id="rec-icon" class="rec-icon"></span>
        <span id="rec-label" class="rec-label"></span>
      </div>
      <div id="rec-clothes" class="rec-clothes"></div>
      <div id="rec-alerts" class="rec-alerts" hidden></div>
    </section>

    <!-- 시간대별 옷차림 가이드 -->
    <section class="timeblock-section">
      <h2 class="section-title">시간대별 옷차림 가이드</h2>
      <div id="date-tabs" class="date-tabs"></div>
      <div id="weekly-guide"></div>
    </section>

    <!-- 핵심 요약 -->
    <section class="summary-section card">
      <h2 class="section-title">핵심 요약</h2>
      <div id="weekly-summary"></div>
    </section>
  </div>

  <script type="module" src="js/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>
</body>
</html>
